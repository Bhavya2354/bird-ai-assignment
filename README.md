ğŸ” Bird Counting and Weight Estimation System

Author: Bhavya

ğŸ“Œ Project Overview

This project is a computer vision prototype that processes poultry farm CCTV footage to:

Detect birds

Track each bird across frames using stable IDs

Count birds over time

Estimate bird weight using a visual proxy

Expose results via a simple FastAPI service

Generate an annotated output video

The system is designed to simulate a real-world poultry monitoring setup using a fixed camera, focusing on ML fundamentals, tracking logic, and system design rather than only model training.

ğŸ§  Why this approach?

Real poultry datasets often provide images instead of videos

To simulate CCTV footage, image sequences were converted into a video

Emphasis is on:

Detection â†’ Tracking â†’ Analytics â†’ API

Robustness and explainability

Clean, reproducible engineering

ğŸ›  Tech Stack

Python 3.10+

YOLOv8 (Ultralytics) â€“ bird detection

OpenCV â€“ video processing & visualization

SORT Tracker â€“ object tracking

NumPy / SciPy â€“ numerical processing

FastAPI + Uvicorn â€“ API layer

All libraries used are open-source.

ğŸ“ Project Structure
bird-ai-assignemnt/
â”‚
â”œâ”€â”€ README.md                 # Project documentation
â”œâ”€â”€ requirements.txt          # Python dependencies
â”œâ”€â”€ app.py                    # FastAPI application
â”œâ”€â”€ run_pipeline.py           # End-to-end pipeline runner
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml           # Thresholds, FPS, paths
â”‚
â”œâ”€â”€ models/
â”‚   â””â”€â”€ yolov8n.pt             # Pretrained YOLOv8 model
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ video_reader.py        # Image â†’ video conversion
â”‚   â”œâ”€â”€ detector.py            # YOLO inference wrapper
â”‚   â”œâ”€â”€ tracker.py             # SORT-based tracking logic
â”‚   â”œâ”€â”€ counter.py             # Bird counting over time
â”‚   â”œâ”€â”€ weight_estimator.py    # Weight proxy estimation
â”‚   â”œâ”€â”€ visualizer.py          # Annotated video writer
â”‚   â”œâ”€â”€ utils.py               # Helper utilities
â”‚   â””â”€â”€ sort/
â”‚       â””â”€â”€ sort.py            # SORT tracker (MIT licensed)
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ train/images/      # Bird images (dataset)
â”‚   â”‚   â”œâ”€â”€ valid/images/
â”‚   â”‚   â””â”€â”€ test/images/
â”‚   â”œâ”€â”€ sample_video.mp4       # Generated CCTV-style video
â”‚   â””â”€â”€ README.md              # Dataset source info
â”‚
â”œâ”€â”€ outputs/
â”‚   â”œâ”€â”€ annotated_videos/
â”‚   â”‚   â””â”€â”€ output.mp4         # Final annotated video
â”‚   â””â”€â”€ json/
â”‚       â””â”€â”€ sample_response.json # Sample API response
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ test_detector.py
    â”œâ”€â”€ test_tracking.py
    â”œâ”€â”€ test_counting.py
    â””â”€â”€ test_weight.py

ğŸ“Š Dataset Used

Since the provided dataset link in the task description was unavailable, the following open-source dataset was used:

Roboflow â€“ Chicken Detection Dataset
ğŸ”— https://universe.roboflow.com/search?q=chicken%20detection

Dataset provides labeled poultry images

Images are organized into train / valid / test

Used for detection and simulated video generation

ğŸ¥ Image â†’ Video Conversion

Because the dataset consists of images:

Images were converted into a CCTV-style video

This allows realistic testing of:

Tracking

Counting over time

Video annotation

Script used:

python src/video_reader.py


Output:

data/sample_video.mp4

ğŸ” Detection

YOLOv8 pretrained model (yolov8n.pt)

Only bird-related detections are considered

Each detection outputs bounding box + confidence

ğŸ” Tracking

SORT (Simple Online Realtime Tracking) algorithm

Each bird gets a stable tracking ID

Handles:

Occlusion

Temporary disappearance

Re-identification

ğŸ”¢ Bird Counting Logic

Birds are counted using unique tracking IDs

Count increases when a new ID appears

Prevents double-counting across frames

âš–ï¸ Weight Estimation (Proxy)

Since real bird weight data is unavailable:

Bounding box area is used as a proxy

Larger visible area â‰ˆ heavier bird

Output is a relative weight index, not grams

This matches real-world scenarios where visual estimation is used as a first approximation.

ğŸ¨ Annotated Output Video

The final output video includes:

Bounding boxes

Tracking IDs

Bird count overlay

Weight proxy overlay

Generated by:

python run_pipeline.py


Output:

outputs/annotated_videos/output.mp4

ğŸŒ API (FastAPI)

A lightweight API exposes the results.

Start the server
uvicorn app:app --reload

Endpoint
GET /analyze

Sample Response
{
  "total_birds_detected": 12,
  "frames_processed": 217,
  "average_weight_index": 0.74,
  "output_video": "outputs/annotated_videos/output.mp4"
}


A sample response is saved at:

outputs/json/sample_response.json

â–¶ï¸ How to Run the Project (From Scratch)
1ï¸âƒ£ Clone the repository
git clone https://github.com/Bhavya2354/bird-ai-assignment.git
cd bird-ai-assignment

2ï¸âƒ£ Create virtual environment
python -m venv venv
venv\Scripts\activate

3ï¸âƒ£ Install dependencies
pip install -r requirements.txt

4ï¸âƒ£ Convert images to video
python src/video_reader.py

5ï¸âƒ£ Run full pipeline
python run_pipeline.py

6ï¸âƒ£ Start API
uvicorn app:app --reload

ğŸ§ª Testing

Individual modules can be tested using:

python tests/test_detector.py
python tests/test_tracking.py
python tests/test_counting.py
python tests/test_weight.py

ğŸ“ Notes

No Docker used (as per instructions)

No external APIs used

Fully local, reproducible setup

Designed for clarity and explainability

âœ… Conclusion

This project demonstrates:

Strong ML fundamentals

Real-time computer vision pipeline design

Practical tracking and analytics

Clean software engineering practices

End-to-end ownership of a system

Author: Bhavya

GitHub: https://github.com/Bhavya2354
